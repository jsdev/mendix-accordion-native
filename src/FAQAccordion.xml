<?xml version="1.0" encoding="utf-8"?>
<widget id="mendix.faqaccordion.FAQAccordion" pluginWidget="true" needsEntityContext="true" offlineCapable="true"
        supportedPlatform="Web"
        xmlns="http://www.mendix.com/widget/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.mendix.com/widget/1.0/ ../node_modules/mendix/custom_widget.xsd">
    <name>FAQ Accordion</name>
    <description>An accordion widget for FAQ pages with show/hide all functionality and rich text support</description>
    <icon/>
    <properties>
        <propertyGroup caption="Data Source">
            <property key="dataSourceType" type="enumeration" defaultValue="static">
                <caption>Data Source Type</caption>
                <description>Choose between static items or a database entity</description>
                <enumerationValues>
                    <enumerationValue key="static">Static Items</enumerationValue>
                    <enumerationValue key="database">Database Entity</enumerationValue>
                </enumerationValues>
            </property>
            <property key="faqItems" type="object" isList="true" required="false">
                <caption>FAQ Items (Static)</caption>
                <description>List of FAQ items with summary and content. Used when Data Source Type is "Static Items".</description>
                <properties>
                    <propertyGroup caption="FAQ Item">
                        <property key="summary" type="textTemplate" required="true">
                            <caption>Summary</caption>
                            <description>The summary/question that appears in the accordion header</description>
                        </property>
                        <property key="content" type="textTemplate" required="true" multiline="true">
                            <caption>Content</caption>
                            <description>The detailed answer/content</description>
                        </property>
                        <property key="contentFormat" type="enumeration" defaultValue="html">
                            <caption>Content Format</caption>
                            <description>Format of the content field</description>
                            <enumerationValues>
                                <enumerationValue key="html">HTML</enumerationValue>
                                <enumerationValue key="markdown">Markdown</enumerationValue>
                                <enumerationValue key="text">Plain Text</enumerationValue>
                            </enumerationValues>
                        </property>
                    </propertyGroup>
                </properties>
            </property>
            <property key="dataSource" type="datasource" isList="true" required="false">
                <caption>FAQ Data Source (Database)</caption>
                <description>Database entity containing FAQ items. Used when Data Source Type is "Database Entity".

‚ö†Ô∏è REQUIRED ENTITY ATTRIBUTES (Convention-Based):
Your entity MUST have these exact attribute names:

‚Ä¢ Summary (String/Text) - The question or title
‚Ä¢ Content (String/Text) - The answer or detailed content  
‚Ä¢ ContentFormat (String/Enum) - Format type: "html", "markdown", or "text"
‚Ä¢ SortOrder (Integer/Long/Decimal) - Numeric sort order for Move Up/Down

Example:
Entity: MyModule.FAQ
Attributes:
  - Summary: String(200)
  - Content: String (unlimited)
  - ContentFormat: Enumeration (html|markdown|text)
  - SortOrder: Integer

üí° Configure your data source view to sort by SortOrder ascending.</description>
            </property>
        </propertyGroup>
        <propertyGroup caption="Editing">
            <property key="allowEditing" type="boolean" defaultValue="false">
                <caption>Allow Editing</caption>
                <description>Enable CRUD editing mode (create, read, update, delete, reorder). Requires entity with Summary, Content, ContentFormat, and SortOrder attributes. Only works with "Database Entity" data source type.</description>
            </property>
            <property key="editorRole" type="string" required="false">
                <caption>Editor Role</caption>
                <description>User role required to edit FAQ items (e.g., "Administrator", "ContentEditor"). Leave empty to allow all authenticated users. Not applicable if Allow Editing is disabled.</description>
            </property>
            <property key="onSaveAction" type="action" required="false">
                <caption>On Save Action (Optional)</caption>
                <description>Optional microflow/nanoflow for custom save logic. If not configured, the widget automatically commits changes to Summary, Content, and ContentFormat attributes. Use this only if you need custom validation or business logic.</description>
            </property>
            <property key="onDeleteAction" type="action" required="false">
                <caption>On Delete Action (Optional)</caption>
                <description>Optional microflow/nanoflow for custom delete logic. If not configured, the widget automatically deletes objects using mx.data.remove. Use this only if you need custom authorization or cascade deletes.</description>
            </property>
            <property key="onCreateAction" type="action" required="false">
                <caption>On Create Action (Optional)</caption>
                <description>Optional microflow/nanoflow for custom object creation. If not configured, the widget automatically creates objects with Summary, Content, ContentFormat, and SortOrder attributes. Use this if you need to set additional attributes or apply business rules.</description>
            </property>
            <property key="sortOrderAttribute" type="attribute" dataSource="dataSource" required="false">
                <caption>Sort Order Attribute (Required for Reordering)</caption>
                <description>Select the "SortOrder" attribute from your entity. Required for Move Up/Down functionality. Must be Integer, Long, or Decimal type. The widget automatically swaps and commits sort order values - no custom action needed.</description>
                <attributeTypes>
                    <attributeType name="Integer"/>
                    <attributeType name="Long"/>
                    <attributeType name="Decimal"/>
                </attributeTypes>
            </property>
        </propertyGroup>
        <propertyGroup caption="General">
            <property key="defaultExpandAll" type="boolean" defaultValue="false">
                <caption>Default Expand All</caption>
                <description>If true, all items are expanded by default</description>
            </property>
            <property key="showToggleButton" type="boolean" defaultValue="true">
                <caption>Show Toggle Button</caption>
                <description>Show the expand all/collapse all button</description>
            </property>
            <property key="toggleButtonText" type="textTemplate" required="false">
                <caption>Toggle Button Text</caption>
                <description>Custom text for the toggle button (optional, defaults to "Show All" / "Hide All")</description>
            </property>
        </propertyGroup>
        <propertyGroup caption="Appearance">
            <property key="animationDuration" type="integer" defaultValue="300">
                <caption>Animation Duration (ms)</caption>
                <description>Duration of the expand/collapse animation in milliseconds</description>
            </property>
        </propertyGroup>
        <propertyGroup caption="Attribute Overrides (All or Nothing)">
            <property key="summaryAttribute" type="attribute" dataSource="dataSource" required="false">
                <caption>Summary Attribute</caption>
                <description>Override the default "Summary" attribute. If you configure ANY override, you MUST configure ALL four overrides.</description>
                <attributeTypes>
                    <attributeType name="String"/>
                </attributeTypes>
            </property>
            <property key="contentAttribute" type="attribute" dataSource="dataSource" required="false">
                <caption>Content Attribute</caption>
                <description>Override the default "Content" attribute. If you configure ANY override, you MUST configure ALL four overrides.</description>
                <attributeTypes>
                    <attributeType name="String"/>
                </attributeTypes>
            </property>
            <property key="contentFormatAttribute" type="attribute" dataSource="dataSource" required="false">
                <caption>Content Format Attribute</caption>
                <description>Override the default "ContentFormat" attribute. If you configure ANY override, you MUST configure ALL four overrides.</description>
                <attributeTypes>
                    <attributeType name="String"/>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="sortOrderAttributeOverride" type="attribute" dataSource="dataSource" required="false">
                <caption>Sort Order Attribute</caption>
                <description>Override the default "SortOrder" attribute. If you configure ANY override, you MUST configure ALL four overrides.</description>
                <attributeTypes>
                    <attributeType name="Integer"/>
                    <attributeType name="Long"/>
                    <attributeType name="Decimal"/>
                </attributeTypes>
            </property>
        </propertyGroup>
    </properties>
</widget>